# =============================================================================
# Tessera Production Environment
# =============================================================================
# Copy this file to .env.production and fill in ALL values before starting.
#
# Generate secrets with:
#   JWT_SECRET:     openssl rand -hex 32
#   ENCRYPTION_KEY: openssl rand -base64 32
#   REDIS_PASSWORD: openssl rand -hex 24
#   DB_PASSWORD:    openssl rand -hex 24
#   MINIO_SECRET:   openssl rand -hex 24
#
# Quick setup:
#   cp .env.production.example .env.production
#   sed -i "s|CHANGE_ME_JWT|$(openssl rand -hex 32)|" .env.production
#   sed -i "s|CHANGE_ME_ENCRYPTION|$(openssl rand -base64 32)|" .env.production
#   sed -i "s|CHANGE_ME_DB|$(openssl rand -hex 24)|" .env.production
#   sed -i "s|CHANGE_ME_REDIS|$(openssl rand -hex 24)|" .env.production
#   sed -i "s|CHANGE_ME_MINIO|$(openssl rand -hex 24)|" .env.production
# =============================================================================

# Application
APP_ENV=production
APP_DEBUG=false

# Logging — valid levels: trace, debug, info, warn, error, fatal, panic
LOG_LEVEL=info

# Server
SERVER_HOST=0.0.0.0
SERVER_PORT=8080

# Host port Tessera listens on (point your reverse proxy here)
TESSERA_PORT=8080

# =============================================================================
# Database
# =============================================================================
DB_HOST=postgres
DB_PORT=5432
DB_NAME=tessera
DB_USER=tessera
DB_PASSWORD=CHANGE_ME_DB

# DB SSL mode:
#   "disable"  — no SSL (default, safe for same-host Docker network)
#   "require"  — encrypted connection, no certificate verification
#   "verify-ca" / "verify-full" — requires CA cert (for remote DB servers)
#
# For same-machine Docker deployment, "disable" is fine since traffic stays
# on the internal Docker bridge network and never touches the wire.
# If your database is on a separate host, set to "require" or higher.
DB_SSLMODE=disable

# =============================================================================
# Redis
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS

# =============================================================================
# MinIO (S3-compatible storage)
# =============================================================================
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=tessera
MINIO_SECRET_KEY=CHANGE_ME_MINIO
MINIO_BUCKET=tessera-files
MINIO_USE_SSL=false

# =============================================================================
# JWT Authentication
# =============================================================================
JWT_SECRET=CHANGE_ME_JWT
JWT_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# =============================================================================
# Encryption (base64-encoded 32-byte key for AES-256)
# =============================================================================
ENCRYPTION_KEY=CHANGE_ME_ENCRYPTION

# =============================================================================
# Upload limits
# =============================================================================
MAX_UPLOAD_SIZE=10737418240
CHUNK_SIZE=10485760

# =============================================================================
# Frontend URL (for CORS — set to your actual domain)
# =============================================================================
FRONTEND_URL=https://tessera.local

# =============================================================================
# Backup schedule (cron format — default: daily at 2 AM)
# =============================================================================
BACKUP_CRON=0 2 * * *
BACKUP_RETAIN_DAYS=30
